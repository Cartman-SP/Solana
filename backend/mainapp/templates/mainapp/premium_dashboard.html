{% extends 'mainapp/base.html' %}

{% block title %}Premium Dashboard - Solana Analytics{% endblock %}

{% block extra_css %}
<style>
    :root {
        --primary-bg: #0a0e1a;
        --secondary-bg: #111827;
        --card-bg: #1f2937;
        --accent-blue: #00d4ff;
        --accent-cyan: #06b6d4;
        --accent-teal: #14b8a6;
        --text-primary: #ffffff;
        --text-secondary: #9ca3af;
        --text-muted: #6b7280;
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #ef4444;
        --border: #374151;
        --glow: 0 0 20px rgba(0, 212, 255, 0.3);
    }

    body {
        background: var(--primary-bg);
        color: var(--text-primary);
        font-family: 'Inter', sans-serif;
    }

    /* Parallax Background */
    .parallax-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background: 
            radial-gradient(circle at 20% 80%, rgba(0, 212, 255, 0.1) 0%, transparent 50%),
            radial-gradient(circle at 80% 20%, rgba(6, 182, 212, 0.1) 0%, transparent 50%),
            radial-gradient(circle at 40% 40%, rgba(20, 184, 166, 0.05) 0%, transparent 50%);
    }

    .floating-particles {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        pointer-events: none;
    }

    .particle {
        position: absolute;
        width: 2px;
        height: 2px;
        background: var(--accent-blue);
        border-radius: 50%;
        animation: float 20s infinite linear;
        opacity: 0.3;
    }

    @keyframes float {
        0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
        10% { opacity: 0.3; }
        90% { opacity: 0.3; }
        100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
    }

    /* Header */
    .premium-header {
        background: rgba(15, 23, 42, 0.95);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid var(--border);
        padding: 1rem 2rem;
        position: sticky;
        top: 0;
        z-index: 100;
    }

    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1400px;
        margin: 0 auto;
    }

    .logo {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--accent-blue);
        text-decoration: none;
    }

    .logo i {
        font-size: 2rem;
        background: linear-gradient(45deg, var(--accent-blue), var(--accent-cyan));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .live-toggle {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        background: var(--card-bg);
        padding: 0.5rem 1rem;
        border-radius: 50px;
        border: 1px solid var(--border);
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .live-toggle:hover {
        border-color: var(--accent-blue);
        box-shadow: var(--glow);
    }

    .live-indicator {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: var(--danger);
        animation: pulse 2s infinite;
    }

    .live-toggle.active .live-indicator {
        background: var(--success);
    }

    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }

    /* Main Content */
    .main-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 2rem;
    }

    /* Stats Cards */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .stat-card {
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 1.5rem;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, transparent, rgba(0, 212, 255, 0.05), transparent);
        transform: translateX(-100%);
        transition: transform 0.6s ease;
    }

    .stat-card:hover::before {
        transform: translateX(100%);
    }

    .stat-card:hover {
        border-color: var(--accent-blue);
        box-shadow: var(--glow);
        transform: translateY(-2px);
    }

    .stat-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    .stat-title {
        color: var(--text-secondary);
        font-size: 0.875rem;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .stat-icon {
        width: 40px;
        height: 40px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(45deg, var(--accent-blue), var(--accent-cyan));
        color: white;
        font-size: 1.25rem;
    }

    .stat-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 0.5rem;
    }

    .stat-change {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.875rem;
    }

    .stat-change.positive {
        color: var(--success);
    }

    .stat-change.negative {
        color: var(--danger);
    }

    /* Filters */
    .filters-section {
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 1.5rem;
        margin-bottom: 2rem;
    }

    .filters-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }

    .filters-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--text-primary);
    }

    .filters-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
    }

    .filter-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .filter-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--text-secondary);
    }

    .filter-input {
        background: var(--secondary-bg);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 0.75rem;
        color: var(--text-primary);
        font-size: 0.875rem;
        transition: all 0.3s ease;
    }

    .filter-input:focus {
        outline: none;
        border-color: var(--accent-blue);
        box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
    }

    .filter-select {
        background: var(--secondary-bg);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 0.75rem;
        color: var(--text-primary);
        font-size: 0.875rem;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .filter-select:focus {
        outline: none;
        border-color: var(--accent-blue);
        box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
    }

    /* Tokens List */
    .tokens-section {
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 1.5rem;
    }

    .tokens-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }

    .tokens-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--text-primary);
    }

    .tokens-count {
        background: var(--accent-blue);
        color: var(--primary-bg);
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: 600;
    }

    .tokens-grid {
        display: grid;
        gap: 1rem;
    }

    .token-card {
        background: var(--secondary-bg);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 1.5rem;
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
        overflow: hidden;
    }

    .token-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: linear-gradient(180deg, var(--accent-blue), var(--accent-cyan));
        transform: scaleY(0);
        transition: transform 0.3s ease;
    }

    .token-card:hover::before {
        transform: scaleY(1);
    }

    .token-card:hover {
        border-color: var(--accent-blue);
        box-shadow: var(--glow);
        transform: translateY(-2px);
    }

    .token-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 1rem;
    }

    .token-info {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .token-name {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--text-primary);
    }

    .token-symbol {
        background: var(--accent-blue);
        color: var(--primary-bg);
        padding: 0.25rem 0.5rem;
        border-radius: 6px;
        font-size: 0.75rem;
        font-weight: 600;
        align-self: flex-start;
    }

    .token-status {
        display: flex;
        gap: 0.5rem;
        flex-direction: column;
        align-items: flex-end;
    }

    .token-time {
        font-size: 0.75rem;
        color: var(--text-secondary);
        font-weight: 500;
        margin-top: 0.25rem;
    }

    .status-badge {
        display: flex;
        align-items: center;
        gap: 0.25rem;
        padding: 0.25rem 0.5rem;
        border-radius: 6px;
        font-size: 0.75rem;
        font-weight: 500;
    }

    .status-badge.verified {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
        border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .status-badge.blocked {
        background: rgba(239, 68, 68, 0.2);
        color: var(--danger);
        border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .status-badge.pending {
        background: rgba(245, 158, 11, 0.2);
        color: var(--warning);
        border: 1px solid rgba(245, 158, 11, 0.3);
    }

    .status-badge.migrated {
        background: rgba(139, 92, 246, 0.2);
        color: #8b5cf6;
        border: 1px solid rgba(139, 92, 246, 0.3);
    }

    .status-badge.community {
        background: rgba(34, 197, 94, 0.2);
        color: #22c55e;
        border: 1px solid rgba(34, 197, 94, 0.3);
    }

    .status-badge.processed-badge {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
        border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .status-badge.migrated-detail {
        background: rgba(139, 92, 246, 0.2);
        color: #8b5cf6;
        border: 1px solid rgba(139, 92, 246, 0.3);
    }

    .detail-value.migrated-status {
        color: var(--success) !important;
        font-weight: 700;
    }

    .detail-value.not-migrated {
        color: var(--text-secondary) !important;
        font-weight: 500;
    }

    .status-badge.completed {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
        border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .detail-value.processed-status {
        color: var(--success) !important;
        font-weight: 700;
    }

    .detail-value.pending-status {
        color: var(--warning) !important;
        font-weight: 500;
    }

    .status-badge.twitter-found-badge {
        background: rgba(29, 161, 242, 0.2);
        color: #1da1f2;
        border: 1px solid rgba(29, 161, 242, 0.3);
    }

    .detail-value.twitter-found {
        color: var(--success) !important;
        font-weight: 700;
    }

    .detail-value.twitter-not-found {
        color: var(--danger) !important;
        font-weight: 500;
    }

    .status-badge.retries-badge {
        background: rgba(245, 158, 11, 0.2);
        color: var(--warning);
        border: 1px solid rgba(245, 158, 11, 0.3);
    }

    .detail-value.retries-count {
        color: var(--warning) !important;
        font-weight: 700;
    }

    .detail-value.no-retries {
        color: var(--success) !important;
        font-weight: 500;
    }

    .status-badge.uri-badge {
        background: rgba(0, 212, 255, 0.2);
        color: var(--accent-blue);
        border: 1px solid rgba(0, 212, 255, 0.3);
    }

    .status-badge.time-badge {
        background: rgba(156, 163, 175, 0.2);
        color: #9ca3af;
        border: 1px solid rgba(156, 163, 175, 0.3);
    }

    .detail-value.created-time {
        color: var(--text-primary) !important;
        font-weight: 600;
    }

    .status-badge.address-badge {
        background: rgba(34, 197, 94, 0.2);
        color: var(--success);
        border: 1px solid rgba(34, 197, 94, 0.3);
    }

    .detail-value.address-value {
        color: var(--accent-blue) !important;
        font-weight: 600;
        cursor: pointer;
        font-family: 'Courier New', monospace;
    }

    .detail-value.address-value:hover {
        color: var(--accent-cyan) !important;
    }

    .status-badge.symbol-badge {
        background: rgba(236, 72, 153, 0.2);
        color: #ec4899;
        border: 1px solid rgba(236, 72, 153, 0.3);
    }

    .detail-value.symbol-value {
        color: var(--accent-cyan) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.name-badge {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
        border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .detail-value.name-value {
        color: var(--text-primary) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.ath-badge {
        background: rgba(245, 158, 11, 0.2);
        color: var(--warning);
        border: 1px solid rgba(245, 158, 11, 0.3);
    }

    .detail-value.ath-value {
        color: var(--warning) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.volume-badge {
        background: rgba(59, 130, 246, 0.2);
        color: #3b82f6;
        border: 1px solid rgba(59, 130, 246, 0.3);
    }

    .detail-value.volume-value {
        color: var(--accent-blue) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.fees-badge {
        background: rgba(168, 85, 247, 0.2);
        color: #a855f7;
        border: 1px solid rgba(168, 85, 247, 0.3);
    }

    .detail-value.fees-value {
        color: var(--accent-cyan) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.retries-detail-badge {
        background: rgba(239, 68, 68, 0.2);
        color: var(--danger);
        border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .detail-value.retries-value {
        color: var(--danger) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.initial-buy-detail-badge {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
        border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .detail-value.initial-buy-value {
        color: var(--success) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.bonding-curve-detail-badge {
        background: rgba(139, 92, 246, 0.2);
        color: #8b5cf6;
        border: 1px solid rgba(139, 92, 246, 0.3);
    }

    .detail-value.bonding-curve-value {
        color: var(--accent-cyan) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.community-id-detail-badge {
        background: rgba(34, 197, 94, 0.2);
        color: var(--success);
        border: 1px solid rgba(34, 197, 94, 0.3);
    }

    .detail-value.community-id-value {
        color: var(--success) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.twitter-detail-badge {
        background: rgba(29, 161, 242, 0.2);
        color: #1da1f2;
        border: 1px solid rgba(29, 161, 242, 0.3);
    }

    .detail-value.twitter-detail-value {
        color: #1da1f2 !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.creator-detail-badge {
        background: rgba(59, 130, 246, 0.2);
        color: #3b82f6;
        border: 1px solid rgba(59, 130, 246, 0.3);
    }

    .detail-value.creator-detail-value {
        color: var(--accent-blue) !important;
        font-weight: 700;
        font-size: 1.1em;
        font-family: 'Courier New', monospace;
    }

    .status-badge.creator-reputation-detail-badge {
        background: rgba(245, 158, 11, 0.2);
        color: var(--warning);
        border: 1px solid rgba(245, 158, 11, 0.3);
    }

    .detail-value.creator-reputation-detail-value {
        color: var(--warning) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.creator-total-tokens-badge {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
        border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .detail-value.creator-total-tokens-value {
        color: var(--success) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.twitter-total-tokens-badge {
        background: rgba(29, 161, 242, 0.2);
        color: #1da1f2;
        border: 1px solid rgba(29, 161, 242, 0.3);
    }

    .detail-value.twitter-total-tokens-value {
        color: #1da1f2 !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.twitter-ath-badge {
        background: rgba(245, 158, 11, 0.2);
        color: var(--warning);
        border: 1px solid rgba(245, 158, 11, 0.3);
    }

    .detail-value.twitter-ath-value {
        color: var(--warning) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.twitter-transactions-badge {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
        border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .detail-value.twitter-transactions-value {
        color: var(--success) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.twitter-fees-badge {
        background: rgba(168, 85, 247, 0.2);
        color: #a855f7;
        border: 1px solid rgba(168, 85, 247, 0.3);
    }

    .detail-value.twitter-fees-value {
        color: #a855f7 !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.twitter-status-detail-badge {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
        border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .detail-value.twitter-status-detail-value {
        color: var(--success) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.creator-status-detail-badge {
        background: rgba(59, 130, 246, 0.2);
        color: #3b82f6;
        border: 1px solid rgba(59, 130, 246, 0.3);
    }

    .detail-value.creator-status-detail-value {
        color: #3b82f6 !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-status-detail-badge {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
        border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .detail-value.token-status-detail-value {
        color: var(--success) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-id-badge {
        background: rgba(156, 163, 175, 0.2);
        color: #9ca3af;
        border: 1px solid rgba(156, 163, 175, 0.3);
    }

    .detail-value.token-id-value {
        color: var(--text-secondary) !important;
        font-weight: 700;
        font-size: 1.1em;
        font-family: 'Courier New', monospace;
    }

    .status-badge.token-name-detail-badge {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
        border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .detail-value.token-name-detail-value {
        color: var(--success) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-symbol-detail-badge {
        background: rgba(236, 72, 153, 0.2);
        color: #ec4899;
        border: 1px solid rgba(236, 72, 153, 0.3);
    }

    .detail-value.token-symbol-detail-value {
        color: #ec4899 !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-created-detail-badge {
        background: rgba(156, 163, 175, 0.2);
        color: #9ca3af;
        border: 1px solid rgba(156, 163, 175, 0.3);
    }

    .detail-value.token-created-detail-value {
        color: var(--text-secondary) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-processed-detail-badge {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
        border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .detail-value.token-processed-detail-value {
        color: var(--success) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-twitter-got-detail-badge {
        background: rgba(29, 161, 242, 0.2);
        color: #1da1f2;
        border: 1px solid rgba(29, 161, 242, 0.3);
    }

    .detail-value.token-twitter-got-detail-value {
        color: #1da1f2 !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-retries-detail-badge {
        background: rgba(239, 68, 68, 0.2);
        color: var(--danger);
        border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .detail-value.token-retries-detail-value {
        color: var(--danger) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-migrated-detail-badge {
        background: rgba(139, 92, 246, 0.2);
        color: #8b5cf6;
        border: 1px solid rgba(139, 92, 246, 0.3);
    }

    .detail-value.token-migrated-detail-value {
        color: #8b5cf6 !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-total-transactions-detail-badge {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
        border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .detail-value.token-total-transactions-detail-value {
        color: var(--success) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-total-fees-detail-badge {
        background: rgba(168, 85, 247, 0.2);
        color: #a855f7;
        border: 1px solid rgba(168, 85, 247, 0.3);
    }

    .detail-value.token-total-fees-detail-value {
        color: #a855f7 !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-ath-detail-badge {
        background: rgba(245, 158, 11, 0.2);
        color: var(--warning);
        border: 1px solid rgba(245, 158, 11, 0.3);
    }

    .detail-value.token-ath-detail-value {
        color: var(--warning) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-initial-buy-detail-badge {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
        border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .detail-value.token-initial-buy-detail-value {
        color: var(--success) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-bonding-curve-detail-badge {
        background: rgba(139, 92, 246, 0.2);
        color: #8b5cf6;
        border: 1px solid rgba(139, 92, 246, 0.3);
    }

    .detail-value.token-bonding-curve-detail-value {
        color: #8b5cf6 !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-community-id-detail-badge {
        background: rgba(34, 197, 94, 0.2);
        color: var(--success);
        border: 1px solid rgba(34, 197, 94, 0.3);
    }

    .detail-value.token-community-id-detail-value {
        color: var(--success) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-uri-detail-badge {
        background: rgba(0, 212, 255, 0.2);
        color: var(--accent-blue);
        border: 1px solid rgba(0, 212, 255, 0.3);
    }

    .detail-value.token-uri-detail-value {
        color: var(--accent-blue) !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-creator-detail-badge {
        background: rgba(59, 130, 246, 0.2);
        color: #3b82f6;
        border: 1px solid rgba(59, 130, 246, 0.3);
    }

    .detail-value.token-creator-detail-value {
        color: #3b82f6 !important;
        font-weight: 700;
        font-size: 1.1em;
        font-family: 'Courier New', monospace;
    }

    .status-badge.token-twitter-detail-badge {
        background: rgba(29, 161, 242, 0.2);
        color: #1da1f2;
        border: 1px solid rgba(29, 161, 242, 0.3);
    }

    .detail-value.token-twitter-detail-value {
        color: #1da1f2 !important;
        font-weight: 700;
        font-size: 1.1em;
    }

    .status-badge.token-address-detail-badge {
        background: rgba(34, 197, 94, 0.2);
        color: var(--success);
        border: 1px solid rgba(34, 197, 94, 0.3);
    }

    .detail-value.token-address-detail-value {
        color: var(--success) !important;
        font-weight: 700;
        font-size: 1.1em;
        font-family: 'Courier New', monospace;
    }

    .detail-value.community-id {
        color: var(--success) !important;
        font-weight: 700;
    }

    .status-badge.initial {
        background: rgba(59, 130, 246, 0.2);
        color: #3b82f6;
        border: 1px solid rgba(59, 130, 246, 0.3);
    }

    .detail-value.initial-buy {
        color: var(--accent-blue) !important;
        font-weight: 700;
    }

    .status-badge.bonding {
        background: rgba(168, 85, 247, 0.2);
        color: #a855f7;
        border: 1px solid rgba(168, 85, 247, 0.3);
    }

    .detail-value.bonding-curve {
        color: var(--accent-cyan) !important;
        font-weight: 700;
    }

    .detail-value.reputation.high {
        color: var(--success) !important;
        font-weight: 700;
    }

    .detail-value.reputation.medium {
        color: var(--warning) !important;
        font-weight: 700;
    }

    .detail-value.reputation.low {
        color: var(--danger) !important;
        font-weight: 700;
    }

    .detail-value.twitter-activity {
        color: var(--accent-blue) !important;
        font-weight: 600;
    }

    .token-address {
        font-size: 0.75rem;
        color: var(--text-secondary);
        font-family: 'Courier New', monospace;
        margin-top: 0.25rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        transition: color 0.3s ease;
    }

    .token-address:hover {
        color: var(--accent-blue);
    }

    .copy-icon {
        font-size: 0.625rem;
        opacity: 0.7;
        transition: opacity 0.3s ease;
    }

    .token-address:hover .copy-icon {
        opacity: 1;
    }

    .token-details {
        margin: 1rem 0;
        padding: 1rem;
        background: var(--secondary-bg);
        border-radius: 8px;
        border: 1px solid var(--border);
    }

    .detail-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
    }

    .detail-row:last-child {
        margin-bottom: 0;
    }

    .detail-label {
        color: var(--text-secondary);
        font-weight: 500;
        min-width: 100px;
    }

    .detail-value {
        color: var(--text-primary);
        font-weight: 600;
        flex: 1;
        margin: 0 0.5rem;
        font-family: 'Courier New', monospace;
    }

    .detail-value.verified {
        color: var(--success);
    }

    .detail-value.blocked {
        color: var(--danger);
    }

    .detail-value.pending {
        color: var(--warning);
    }

    .detail-extra {
        font-size: 0.75rem;
        color: var(--text-secondary);
        font-style: italic;
    }

    .uri-value {
        cursor: pointer;
        text-decoration: underline;
        color: var(--accent-blue) !important;
    }

    .uri-value:hover {
        color: var(--accent-cyan) !important;
    }

    .token-footer {
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid var(--border);
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        font-size: 0.75rem;
    }

    .footer-right {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 0.5rem;
    }

    .processing-details {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
        justify-content: flex-end;
    }

    .detail-badge {
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        font-size: 0.625rem;
        font-weight: 500;
    }

    .detail-badge.success {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
    }

    .detail-badge.info {
        background: rgba(59, 130, 246, 0.2);
        color: #3b82f6;
    }

    .footer-info {
        display: flex;
        gap: 0.5rem;
    }

    .processing-status, .twitter-status {
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        font-weight: 500;
    }

    .processing-status.processed {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
    }

    .processing-status.pending {
        background: rgba(245, 158, 11, 0.2);
        color: var(--warning);
    }

    .twitter-status.got {
        background: rgba(16, 158, 11, 0.2);
        color: var(--success);
    }

    .twitter-status.not-got {
        background: rgba(239, 68, 68, 0.2);
        color: var(--danger);
    }

    .retries-status {
        background: rgba(245, 158, 11, 0.2);
        color: var(--warning);
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        font-weight: 500;
    }

    .created-date {
        color: var(--text-secondary);
        font-weight: 500;
    }

    .copy-notification {
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--success);
        color: white;
        padding: 0.75rem 1rem;
        border-radius: 8px;
        font-weight: 500;
        z-index: 1000;
        animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    .token-metrics {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
    }

    .metric-item {
        text-align: center;
    }

    .metric-value {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.25rem;
    }

    .metric-label {
        font-size: 0.75rem;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .sparkline {
        width: 100%;
        height: 40px;
        background: var(--primary-bg);
        border-radius: 6px;
        margin-top: 1rem;
        position: relative;
        overflow: hidden;
    }

    .sparkline-line {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 2px;
        background: linear-gradient(90deg, var(--accent-blue), var(--accent-cyan));
        transform-origin: left;
        animation: sparkline 3s ease-in-out infinite;
    }

    @keyframes sparkline {
        0%, 100% { transform: scaleX(0); }
        50% { transform: scaleX(1); }
    }

    /* Loading */
    .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(0, 212, 255, 0.3);
        border-radius: 50%;
        border-top-color: var(--accent-blue);
        animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    /* New Token Animation */
    .token-card.new {
        animation: slideInDown 0.5s ease-out;
    }

    @keyframes slideInDown {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Responsive */
    @media (max-width: 768px) {
        .main-container {
            padding: 1rem;
        }
        
        .stats-grid {
            grid-template-columns: 1fr;
        }
        
        .filters-grid {
            grid-template-columns: 1fr;
        }
        
        .token-metrics {
            grid-template-columns: repeat(2, 1fr);
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Parallax Background -->
<div class="parallax-bg"></div>
<div class="floating-particles" id="particles"></div>

<!-- Header -->
<header class="premium-header">
    <div class="header-content">
        <a href="{% url 'home_page' %}" class="logo">
            <i class="fas fa-chart-line"></i>
            <span>Solana Analytics</span>
        </a>
        <div class="live-toggle" id="liveToggle">
            <div class="live-indicator"></div>
            <span>Live Mode</span>
        </div>
    </div>
</header>

<!-- Main Content -->
<main class="main-container">
    <!-- Stats Cards -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-header">
                <span class="stat-title">Total Tokens</span>
                <div class="stat-icon">
                    <i class="fas fa-coins"></i>
                </div>
            </div>
            <div class="stat-value" id="totalTokens">0</div>
            <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i>
                <span id="tokensChange">+0%</span>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-header">
                <span class="stat-title">Active Creators</span>
                <div class="stat-icon">
                    <i class="fas fa-users"></i>
                </div>
            </div>
            <div class="stat-value" id="activeCreators">0</div>
            <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i>
                <span id="creatorsChange">+0%</span>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-header">
                <span class="stat-title">Twitter Communities</span>
                <div class="stat-icon">
                    <i class="fab fa-twitter"></i>
                </div>
            </div>
            <div class="stat-value" id="twitterCommunities">0</div>
            <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i>
                <span id="twitterChange">+0%</span>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-header">
                <span class="stat-title">Total Volume</span>
                <div class="stat-icon">
                    <i class="fas fa-chart-area"></i>
                </div>
            </div>
            <div class="stat-value" id="totalVolume">0</div>
            <div class="stat-change negative">
                <i class="fas fa-arrow-down"></i>
                <span id="volumeChange">-0%</span>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-header">
                <span class="stat-title">Total Fees</span>
                <div class="stat-icon">
                    <i class="fas fa-coins"></i>
                </div>
            </div>
            <div class="stat-value" id="totalFees">0</div>
            <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i>
                <span id="feesChange">+0%</span>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-header">
                <span class="stat-title">Processed</span>
                <div class="stat-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
            </div>
            <div class="stat-value" id="processedTokens">0</div>
            <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i>
                <span id="processedChange">+0%</span>
            </div>
        </div>
    </div>

    <!-- Filters -->
    <div class="filters-section">
        <div class="filters-header">
            <h2 class="filters-title">Filters & Search</h2>
        </div>
        <div class="filters-grid">
            <div class="filter-group">
                <label class="filter-label">Token Name/Symbol</label>
                <input type="text" class="filter-input" id="tokenSearch" placeholder="Search tokens...">
            </div>
            <div class="filter-group">
                <label class="filter-label">Creator Address</label>
                <input type="text" class="filter-input" id="creatorSearch" placeholder="Search creators...">
            </div>
            <div class="filter-group">
                <label class="filter-label">Twitter Account</label>
                <input type="text" class="filter-input" id="twitterSearch" placeholder="Search Twitter...">
            </div>
            <div class="filter-group">
                <label class="filter-label">Status</label>
                <select class="filter-select" id="statusFilter">
                    <option value="">All Statuses</option>
                    <option value="verified">Verified</option>
                    <option value="blocked">Blocked</option>
                    <option value="pending">Pending</option>
                </select>
            </div>
            <div class="filter-group">
                <label class="filter-label">Processing</label>
                <select class="filter-select" id="processingFilter">
                    <option value="">All</option>
                    <option value="processed">Processed</option>
                    <option value="pending">Pending</option>
                </select>
            </div>
            <div class="filter-group">
                <label class="filter-label">Twitter Status</label>
                <select class="filter-select" id="twitterFilter">
                    <option value="">All</option>
                    <option value="got">Twitter Found</option>
                    <option value="not_got">No Twitter</option>
                </select>
            </div>
            <div class="filter-group">
                <label class="filter-label">Sort By</label>
                <select class="filter-select" id="sortBy">
                    <option value="created_at">Date Created</option>
                    <option value="ath">ATH Price</option>
                    <option value="volume">Volume</option>
                    <option value="fees">Fees</option>
                    <option value="retries">Retries</option>
                    <option value="initial_buy">Initial Buy</option>
                    <option value="name">Name</option>
                    <option value="symbol">Symbol</option>
                </select>
            </div>
            <div class="filter-group">
                <label class="filter-label">Order</label>
                <select class="filter-select" id="sortOrder">
                    <option value="desc">Descending</option>
                    <option value="asc">Ascending</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Tokens List -->
    <div class="tokens-section">
        <div class="tokens-header">
            <h2 class="tokens-title">Token Activity</h2>
            <div class="tokens-count" id="tokensCount">0 tokens</div>
        </div>
        <div class="tokens-grid" id="tokensGrid">
            <div class="loading" style="text-align: center; padding: 2rem;">
                <span class="loading"></span>
                <div style="margin-top: 1rem;">Loading tokens...</div>
            </div>
        </div>
    </div>
</main>
{% endblock %}

{% block extra_js %}
<script>
    // Initialize particles
    function initParticles() {
        const particlesContainer = document.getElementById('particles');
        const particleCount = 50;

        for (let i = 0; i < particleCount; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 20 + 's';
            particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
            particlesContainer.appendChild(particle);
        }
    }

    // Live mode toggle
    function initLiveToggle() {
        const liveToggle = document.getElementById('liveToggle');
        let isLive = false;

        liveToggle.addEventListener('click', () => {
            isLive = !isLive;
            liveToggle.classList.toggle('active', isLive);
            
            if (isLive) {
                startLiveMode();
            } else {
                stopLiveMode();
            }
        });
    }

    // Load dashboard data
    async function loadDashboardData() {
        try {
            const response = await fetch('{% url "premium_dashboard_data" %}');
            const data = await response.json();
            
            if (data.success) {
                updateStats(data.stats);
                renderTokens(data.tokens);
            }
        } catch (error) {
            console.error('Error loading dashboard data:', error);
        }
    }

    // Update statistics
    function updateStats(stats) {
        document.getElementById('totalTokens').textContent = stats.total_tokens.toLocaleString();
        document.getElementById('activeCreators').textContent = stats.active_creators.toLocaleString();
        document.getElementById('twitterCommunities').textContent = stats.twitter_communities.toLocaleString();
        document.getElementById('totalVolume').textContent = stats.total_volume.toLocaleString();
        document.getElementById('totalFees').textContent = stats.total_fees.toLocaleString();
        document.getElementById('processedTokens').textContent = stats.verified_tokens.toLocaleString();
        
        // Calculate changes (mock for now)
        document.getElementById('tokensChange').textContent = `+${Math.floor(Math.random() * 20)}%`;
        document.getElementById('creatorsChange').textContent = `+${Math.floor(Math.random() * 15)}%`;
        document.getElementById('twitterChange').textContent = `+${Math.floor(Math.random() * 25)}%`;
        document.getElementById('volumeChange').textContent = `-${Math.floor(Math.random() * 10)}%`;
        document.getElementById('feesChange').textContent = `+${Math.floor(Math.random() * 15)}%`;
        document.getElementById('processedChange').textContent = `+${Math.floor(Math.random() * 30)}%`;
    }

    // Render tokens
    function renderTokens(tokens) {
        const tokensGrid = document.getElementById('tokensGrid');
        const tokensCount = document.getElementById('tokensCount');
        
        tokensCount.textContent = `${tokens.length} tokens`;
        tokensGrid.innerHTML = '';

        tokens.forEach(token => {
            const tokenCard = createTokenCard(token);
            tokensGrid.appendChild(tokenCard);
        });
    }

    // Create token card
    function createTokenCard(token) {
        const card = document.createElement('div');
        card.className = 'token-card';
        card.innerHTML = `
            <div class="token-header">
                <div class="token-info">
                    <div class="token-name">${token.name}</div>
                    <div class="token-symbol">${token.symbol}</div>
                    <div class="token-address" title="Click to copy full address">
                    ${token.address.substring(0, 8)}...${token.address.substring(token.address.length - 8)}
                    <i class="fas fa-copy copy-icon"></i>
                </div>
                </div>
                <div class="token-status">
                    ${getStatusBadge(token.status)}
                    ${token.migrated ? '<span class="status-badge migrated"><i class="fas fa-exchange-alt"></i> Migrated</span>' : ''}
                    ${token.processed ? '<span class="status-badge processed-badge"><i class="fas fa-check-circle"></i> Processed</span>' : ''}
                    <div class="token-time">${formatDate(token.created_at)}</div>
                </div>
            </div>
            
            <div class="token-details">
                <div class="detail-row">
                    <span class="detail-label">Creator:</span>
                    <span class="detail-value ${token.creator_status}">${token.creator ? token.creator.substring(0, 8) + '...' : 'Unknown'}</span>
                    <span class="status-badge ${token.creator_status}">${token.creator_status}</span>
                    <span class="detail-extra">(${token.creator_total_tokens} tokens)</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Creator Reputation:</span>
                    <span class="detail-value reputation ${token.creator_status === 'verified' ? 'high' : token.creator_status === 'blocked' ? 'low' : 'medium'}">
                        ${token.creator_status === 'verified' ? 'High' : token.creator_status === 'blocked' ? 'Low' : 'Medium'}
                    </span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Twitter:</span>
                    <span class="detail-value">${token.twitter || 'None'}</span>
                    ${token.twitter ? `<span class="status-badge ${token.twitter_status}">${token.twitter_status}</span>` : ''}
                    ${token.twitter ? `<span class="detail-extra">(${token.twitter_total_tokens} tokens, ATH: ${token.twitter_ath})</span>` : ''}
                </div>
                ${token.twitter ? `
                <div class="detail-row">
                    <span class="detail-label">Twitter Activity:</span>
                    <span class="detail-value twitter-activity">
                        ${token.twitter_total_trans} transactions, ${token.twitter_total_fees.toFixed(2)} fees
                    </span>
                </div>
                ` : ''}
                <div class="detail-row">
                    <span class="detail-label">Community ID:</span>
                    <span class="detail-value ${token.community_id !== 'None' ? 'community-id' : ''}">${token.community_id}</span>
                    ${token.community_id !== 'None' ? '<span class="status-badge community">Community</span>' : ''}
                </div>
                <div class="detail-row">
                    <span class="detail-label">Migration Status:</span>
                    <span class="detail-value ${token.migrated ? 'migrated-status' : 'not-migrated'}">
                        ${token.migrated ? 'Migrated' : 'Not Migrated'}
                    </span>
                    ${token.migrated ? '<span class="status-badge migrated-detail"><i class="fas fa-exchange-alt"></i> Migrated</span>' : ''}
                </div>
                <div class="detail-row">
                    <span class="detail-label">Processing Status:</span>
                    <span class="detail-value ${token.processed ? 'processed-status' : 'pending-status'}">
                        ${token.processed ? 'Completed' : 'Pending'}
                    </span>
                    ${token.processed ? '<span class="status-badge completed"><i class="fas fa-check-circle"></i> Completed</span>' : ''}
                </div>
                <div class="detail-row">
                    <span class="detail-label">Twitter Status:</span>
                    <span class="detail-value ${token.twitter_got ? 'twitter-found' : 'twitter-not-found'}">
                        ${token.twitter_got ? 'Found' : 'Not Found'}
                    </span>
                    ${token.twitter_got ? '<span class="status-badge twitter-found-badge"><i class="fas fa-twitter"></i> Found</span>' : ''}
                </div>
                <div class="detail-row">
                    <span class="detail-label">Retry Count:</span>
                    <span class="detail-value ${token.retries > 0 ? 'retries-count' : 'no-retries'}">
                        ${token.retries} attempts
                    </span>
                    ${token.retries > 0 ? '<span class="status-badge retries-badge"><i class="fas fa-redo"></i> ${token.retries} retries</span>' : ''}
                </div>
                <div class="detail-row">
                    <span class="detail-label">Bonding Curve:</span>
                    <span class="detail-value ${token.bonding_curve !== 'Unknown' ? 'bonding-curve' : ''}">${token.bonding_curve}</span>
                    ${token.bonding_curve !== 'Unknown' ? '<span class="status-badge bonding">Bonding</span>' : ''}
                </div>
                <div class="detail-row">
                    <span class="detail-label">Initial Buy:</span>
                    <span class="detail-value ${token.initial_buy > 0 ? 'initial-buy' : ''}">${token.initial_buy.toFixed(4)} SOL</span>
                    ${token.initial_buy > 0 ? '<span class="status-badge initial">Initial</span>' : ''}
                </div>
                <div class="detail-row">
                    <span class="detail-label">URI:</span>
                    <span class="detail-value uri-value" title="${token.uri}">${token.uri !== 'None' ? token.uri.substring(0, 30) + '...' : 'None'}</span>
                    ${token.uri !== 'None' ? '<span class="status-badge uri-badge"><i class="fas fa-link"></i> URI</span>' : ''}
                </div>
                <div class="detail-row">
                    <span class="detail-label">Created:</span>
                    <span class="detail-value created-time">${formatDate(token.created_at)}</span>
                    <span class="status-badge time-badge"><i class="fas fa-clock"></i> Time</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Address:</span>
                    <span class="detail-value address-value" title="Click to copy">${token.address.substring(0, 12)}...${token.address.substring(token.address.length - 12)}</span>
                    <span class="status-badge address-badge"><i class="fas fa-copy"></i> Copy</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Symbol:</span>
                    <span class="detail-value symbol-value">${token.symbol}</span>
                    <span class="status-badge symbol-badge"><i class="fas fa-tag"></i> Symbol</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Name:</span>
                    <span class="detail-value name-value">${token.name}</span>
                    <span class="status-badge name-badge"><i class="fas fa-font"></i> Name</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">ATH:</span>
                    <span class="detail-value ath-value">${token.ath.toLocaleString()}</span>
                    <span class="status-badge ath-badge"><i class="fas fa-chart-line"></i> ATH</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Volume:</span>
                    <span class="detail-value volume-value">${(token.volume / 1000).toFixed(1)}K</span>
                    <span class="status-badge volume-badge"><i class="fas fa-chart-area"></i> Volume</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Fees:</span>
                    <span class="detail-value fees-value">${(token.fees / 1000).toFixed(1)}K</span>
                    <span class="status-badge fees-badge"><i class="fas fa-coins"></i> Fees</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Retries:</span>
                    <span class="detail-value retries-value">${token.retries}</span>
                    <span class="status-badge retries-detail-badge"><i class="fas fa-redo"></i> Retries</span>
                </div>
            </div>
            
            <div class="token-metrics">
                <div class="metric-item">
                    <div class="metric-value">${token.ath.toLocaleString()}</div>
                    <div class="metric-label">ATH</div>
                </div>
                <div class="metric-item">
                    <div class="metric-value">${(token.volume / 1000).toFixed(1)}K</div>
                    <div class="metric-label">Volume</div>
                </div>
                <div class="metric-item">
                    <div class="metric-value">${(token.fees / 1000).toFixed(1)}K</div>
                    <div class="metric-label">Fees</div>
                </div>
                <div class="metric-item">
                    <div class="metric-value">${token.retries}</div>
                    <div class="metric-label">Retries</div>
                </div>
                <div class="metric-item">
                    <div class="metric-value">${token.initial_buy > 0 ? token.initial_buy.toFixed(4) : '0'}</div>
                    <div class="metric-label">Initial SOL</div>
                </div>
                <div class="metric-item">
                    <div class="metric-value">${token.community_id !== 'None' ? 'Yes' : 'No'}</div>
                    <div class="metric-label">Community</div>
                </div>
            </div>
            
                            <div class="token-footer">
                    <div class="footer-info">
                        <span class="processing-status ${token.processed ? 'processed' : 'pending'}">
                            ${token.processed ? '✓ Processed' : '⏳ Pending'}
                        </span>
                        <span class="twitter-status ${token.twitter_got ? 'got' : 'not-got'}">
                            ${token.twitter_got ? '✓ Twitter Found' : '❌ No Twitter'}
                        </span>
                        ${token.retries > 0 ? `<span class="retries-status">🔄 ${token.retries} retries</span>` : ''}
                    </div>
                    <div class="footer-right">
                        <div class="processing-details">
                            ${token.processed ? `<span class="detail-badge success">✓ Metadata Processed</span>` : ''}
                            ${token.twitter_got ? `<span class="detail-badge info">✓ Community Found</span>` : ''}
                        </div>
                        <div class="created-date">
                            ${formatDate(token.created_at)}
                        </div>
                    </div>
                </div>
        `;

        // Add click handler for the card
        card.addEventListener('click', (e) => {
            // Don't trigger if clicking on URI
            if (e.target.classList.contains('uri-value')) {
                e.stopPropagation();
                if (token.uri && token.uri !== 'None') {
                    window.open(token.uri, '_blank');
                }
                return;
            }
            // Don't trigger if clicking on address
            if (e.target.closest('.token-address')) {
                e.stopPropagation();
                copyToClipboard(token.address);
                return;
            }
            // Don't trigger if clicking on address value in details
            if (e.target.classList.contains('address-value')) {
                e.stopPropagation();
                copyToClipboard(token.address);
                return;
            }
            showTokenDetails(token);
        });

        return card;
    }

    // Show token details
    function showTokenDetails(token) {
        // For now, redirect to the token details page
        window.location.href = `/premium/token/${token.id}/`;
    }

    // Get status badge
    function getStatusBadge(status) {
        switch(status) {
            case 'verified':
                return '<span class="status-badge verified"><i class="fas fa-check"></i> Verified</span>';
            case 'blocked':
                return '<span class="status-badge blocked"><i class="fas fa-ban"></i> Blocked</span>';
            case 'pending':
                return '<span class="status-badge pending"><i class="fas fa-clock"></i> Pending</span>';
            default:
                return '<span class="status-badge pending"><i class="fas fa-question"></i> Unknown</span>';
        }
    }

    // Show token details
    function showTokenDetails(token) {
        window.location.href = `{% url 'premium_token_details' token_id=0 %}`.replace('0', token.id);
    }

    // Live mode functions
    let liveInterval;

    function startLiveMode() {
        console.log('Live mode started');
        // Reload data every 10 seconds
        liveInterval = setInterval(() => {
            loadDashboardData();
        }, 10000);
    }

    function stopLiveMode() {
        console.log('Live mode stopped');
        if (liveInterval) {
            clearInterval(liveInterval);
            liveInterval = null;
        }
    }

    // Search and filter functionality
    function initSearchAndFilters() {
        const tokenSearch = document.getElementById('tokenSearch');
        const creatorSearch = document.getElementById('creatorSearch');
        const twitterSearch = document.getElementById('twitterSearch');
        const statusFilter = document.getElementById('statusFilter');
        const processingFilter = document.getElementById('processingFilter');
        const twitterFilter = document.getElementById('twitterFilter');
        const sortBy = document.getElementById('sortBy');
        const sortOrder = document.getElementById('sortOrder');

        // Add event listeners for real-time filtering
        [tokenSearch, creatorSearch, twitterSearch, statusFilter, processingFilter, twitterFilter, sortBy, sortOrder].forEach(element => {
            element.addEventListener('change', filterTokens);
            if (element.type === 'text') {
                element.addEventListener('input', debounce(filterTokens, 300));
            }
        });
    }

    async function filterTokens() {
        try {
            const tokenSearch = document.getElementById('tokenSearch').value;
            const creatorSearch = document.getElementById('creatorSearch').value;
            const twitterSearch = document.getElementById('twitterSearch').value;
            const statusFilter = document.getElementById('statusFilter').value;
            const processingFilter = document.getElementById('processingFilter').value;
            const twitterFilter = document.getElementById('twitterFilter').value;
            const sortBy = document.getElementById('sortBy').value;
            const sortOrder = document.getElementById('sortOrder').value;

            // Build query string
            const params = new URLSearchParams();
            if (tokenSearch || creatorSearch || twitterSearch) {
                params.append('q', `${tokenSearch} ${creatorSearch} ${twitterSearch}`.trim());
            }
            if (statusFilter) params.append('status', statusFilter);
            if (processingFilter) params.append('processing', processingFilter);
            if (twitterFilter) params.append('twitter_status', twitterFilter);
            if (sortBy) params.append('sort', sortBy);
            if (sortOrder) params.append('order', sortOrder);

            const response = await fetch(`{% url 'premium_token_search' %}?${params.toString()}`);
            const data = await response.json();
            
            if (data.success) {
                renderTokens(data.tokens);
            }
        } catch (error) {
            console.error('Error filtering tokens:', error);
        }
    }

    // Copy to clipboard function
    function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(() => {
            // Show a temporary success message
            const notification = document.createElement('div');
            notification.className = 'copy-notification';
            notification.textContent = 'Address copied!';
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 2000);
        }).catch(err => {
            console.error('Failed to copy: ', err);
        });
    }

    // Format date function
    function formatDate(dateString) {
        const date = new Date(dateString);
        const now = new Date();
        const diffInHours = Math.floor((now - date) / (1000 * 60 * 60));
        const diffInDays = Math.floor(diffInHours / 24);
        
        if (diffInHours < 1) {
            return 'Just now';
        } else if (diffInHours < 24) {
            return `${diffInHours}h ago`;
        } else if (diffInDays < 7) {
            return `${diffInDays}d ago`;
        } else {
            return date.toLocaleDateString();
        }
    }

    // Debounce function
    function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }

    // Initialize everything
    document.addEventListener('DOMContentLoaded', () => {
        initParticles();
        initLiveToggle();
        initSearchAndFilters();
        loadDashboardData();
    });
</script>
{% endblock %} 